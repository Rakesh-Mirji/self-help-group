{% extends "layout.html" %}
{% block title %}Approves{% endblock %}
{% block content %}

<div class="min-h-[50vh] w-full flex justify-center items-center">
    <div class=" w-1/2 p-2 bg-white border-2 rounded-2xl shadow-lg">
        <table class="table-fixed w-full">
            {% if approves %}
            <tr class=" border-t-2 "><th class="p-5">Name</th><th class="p-5">Address</th><th class="p-5">Phone Number</th><th>View</th></th></tr>
            {% for approve in approves %}
            <tr class="user border-t-2 text-center">
                <td  data-value = {{approve.username}} class="p-5">{{ approve.username }}</td>
                <td  data-value = {{approve.address}}>{{ approve.address }}</td>
                <td  data-value = {{approve.phone}}>{{ approve.phone }}</td>
                <td><button data-value = {{approve.id}}  class = "btn hover:brightness-90 text-white bg-blue-500 p-1 px-3 border-2 shadow-lg rounded-lg">View</button> </td>
            </tr>
            {% endfor %}
        </table>
        </div> 
    {% else %}
        <div class="text-center">No new users to be Approved </div>
    {% endif %}
    <form method="POST">
        <div id="select" class="h-screen w-screen bg-black/30 hidden fixed top-0 left-0">
            <div class="p-10 border-2  w-1/3 shadow-2xl bg-white rounded-lg absolute top-[25%] left-[35%]">
                <h1 class="close font-bold text-[20px] text-right cursor-pointer">X</h1>
                <div class="flex pb-5 gap-1">
                    <label class="font-medium">Name: </label>
                    <div id="name"></div>
                </div>
                <div class="flex gap-1">
                    <label class="font-medium">Address: </label>
                    <div id="address"></div>
                </div>
                <div class="flex py-5 gap-1">
                    <label class="font-medium">Phone: </label>
                    <div id="phone"></div>
                </div>
                <div class="flex justify-center items-center">
                    <button id="verify" type="submit" class="p-3 px-10 bg-green-500 text-white rounded-[20px]">Verify</button>
                </div>
                <input id="user_id" name="user_id" type="hidden">
            </div>
        </div>
    </form>
</div>

<script>
    let name = document.getElementById('name')
    let address = document.getElementById('address')
    let phone = document.getElementById('phone')
    let user_id = document.getElementById('user_id')


$('.user').on( "click", e => {
    if(e.target.className.includes('btn')){
        let i = $(e.target).attr('data-value')
        info = e.currentTarget.cells
        console.log(name);
        name.textContent = info[0].textContent
        address.textContent = info[1].textContent
        phone.textContent = info[2].textContent
        user_id.value = i
        $(e.target.classList.toggle('bg-green-500'))
        setTimeout(()=>{
        $(e.target.classList.toggle('bg-green-500'))
        },3000)
        $('#select').show()
    }
    } );

    $('.close').on('click', e =>{
           $('#select').hide()
    } )

</script>


{% endblock %}